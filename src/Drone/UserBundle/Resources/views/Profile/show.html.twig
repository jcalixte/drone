{% extends 'DroneUserBundle::layout.html.twig' %}
{% trans_default_domain 'FOSUserBundle' %}

{% block body_user %}
	<div class="user_show">
		<div class="profile-picture">
			<img src="{{ vich_uploader_asset(user, 'imageFile') }}" alt="{{ user.username }}" />
		</div>
		<h1>{{ user.firstname|capitalize }} {{ user.lastname|capitalize }}</h1>

		<div class="profile-access col-md-2">
			<a class="btn btn-warning btn-block" href="{{ path('fos_user_profile_edit') }}" title="Éditer votre profil">
				Éditer votre profil
			</a>
			<a class="btn btn-warning btn-block" href="{{ path('drone_map_homepage') }}" title="Accéder à la page de cartographie">
				Cartographie
			</a>
			<a class="btn btn-warning btn-block" href="{{ path('drone_new') }}" title="Ajouter un drone">
				Ajouter un drone
			</a>
		</div>

		<div class="profile-about col-md-4 col-md-offset-4">
			<h3>À propos</h3>
			<p>
				<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
				{{ user.username|capitalize }}
			</p>
			<p>
				<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
				{{ user.email }}
			</p>
			<p>
				<span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
				{{ user.city }}, {{ user.getCountryName }}
			</p>
		</div>

		{% if user.drones|length > 0 %}
		<div class="profile-drone col-md-6 col-md-offset-3 clear">
			<h2>Drones</h2>
			<table class="table table-striped table-hover table-condensed">
				<tbody>
					{% for drone in user.drones %}
						<tr>
							<td>{{ drone }}</td>
							<td>{{ drone.latitude|number_format(5) }}</td>
							<td>{{ drone.longitude|number_format(5) }}</td>
							<td>
								<a href="{{ path('drone_manage', {id: drone.id}) }}" class="btn btn-info">
									Gérer le drone
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% endif %}

		<div class="clear"></div>
	</div>
{% endblock body_user %}
